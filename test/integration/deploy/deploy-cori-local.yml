services:
  - client:
      config_template: templates/client/jaws-client.conf
      config_output: $JAWS_INSTALL_DIR/configs/jaws-client.conf
      deploy_script: templates/client/deploy-jaws-client
  - central:
      config_template: templates/central/jaws-central.conf
      config_output: $JAWS_INSTALL_DIR/configs/jaws-central.conf
      deploy_script: templates/central/deploy-jaws-central
      environment:
        JAWS_DEPLOY_CENTRAL: 1
  - site:
      config_template: templates/site/jaws-site.conf
      config_output: $JAWS_INSTALL_DIR/configs/jaws-site.conf
      deploy_script: templates/site/deploy-jaws-site
      environment:
        JAWS_DEPLOY_SITE: 1
        JAWS_DEPLOY_CLIENT: 1
  - cromwell:
      config_template: templates/cromwell/cromwell-shifter.conf
      config_output: $JAWS_INSTALL_DIR/configs/cromwell.conf
      deploy_script: templates/cromwell/deploy-cromwell
  - jtm:
      config_template: templates/jtm/jaws-jtm.conf
      config_output: $JAWS_INSTALL_DIR/configs/jaws-jtm.conf
      deploy_script: templates/jtm/deploy-jaws-jtm
  - supervisor_jaws:
      deploy_script: templates/supervisor/deploy-supervisor-jaws
  - supervisor_jtm:
      deploy_script: templates/supervisor/deploy-supervisor-jtm

service_group:
  all: [client, central, site, cromwell, jtm, supervisor_jaws, supervisor_jtm]
  supervisor: [supervisor_jaws, supervisor_jtm]

environment:
  JAWS_INSTALL_DIR:
  JAWS_SRC_DIR:
  JAWS_DEPLOY_NAME: dev
  JAWS_SITE_NAME: CORI
  JAWS_DEVELOPER_MODE: 0
  JAWS_IS_LOCAL_DEV_ENV: 1

  JAWS_VERSION: 2.0.1
  JAWS_DOCS_URL: https://jaws-docs.readthedocs.io/en/latest

  JAWS_CENTRAL_DB_HOST: jaws-db.lbl.gov
  JAWS_CENTRAL_DB_PORT: 3306
  JAWS_CENTRAL_DB_NAME: jaws_central_$JAWS_DEPLOY_NAME
  JAWS_CENTRAL_DB_USER: jaws
  JAWS_CENTRAL_DB_PWD: $JAWS_CENTRAL_DB_PW
  JAWS_CENTRAL_RMQ_HOST: rmq.lbl.gov
  JAWS_CENTRAL_RMQ_PORT: 5672
  JAWS_CENTRAL_RMQ_VHOST: jaws_$JAWS_DEPLOY_NAME
  JAWS_CENTRAL_RMQ_QUEUE: CENTRAL
  JAWS_CENTRAL_RMQ_USER: jaws
  JAWS_CENTRAL_RMQ_PWD: $JAWS_CENTRAL_RMQ_PW
  JAWS_CENTRAL_GLOBUS_CLIENT_ID: 29a47d96-76b4-4f2b-a8bb-a4cb38ea17e3
  JAWS_CENTRAL_GLOBAL_CLIENT_SECRET: $JAWS_GLOBUS_CLIENT_SECRET
  JAWS_CENTRAL_AUTH_PORT: 3004
  JAWS_CENTRAL_REST_PORT: 5004

  JAWS_CLIENT_SITE_NAME_ID: $JAWS_SITE_NAME
  JAWS_CLIENT_INSTALL_DIR: $JAWS_INSTALL_DIR/client
  JAWS_CLIENT_GROUP_PERMISSON: ''
  JAWS_CLIENT_NAME: jaws-$JAWS_DEPLOY_NAME
  JAWS_CLIENT_REST_URL: http://localhost
  JAWS_CLIENT_STAGING_DIR: /global/cscratch1/sd/jaws/jaws-$JAWS_DEPLOY_NAME/users
  JAWS_CLIENT_DATA_REPO_DIR: /global/cfs/cdirs/jaws/data-repository-$JAWS_DEPLOY_NAME
  JAWS_CLIENT_WOMTOOL_JAR: https://github.com/broadinstitute/cromwell/releases/download/52/womtool-52.jar
  JAWS_CLIENT_SHARED_ENDPOINT_GROUP: genome
  JAWS_CLIENT_GLOBUS_CLIENT_ID: 29a47d96-76b4-4f2b-a8bb-a4cb38ea17e3
  JAWS_CLIENT_GLOBUS_ENDPOINT_ID: be1ff650-dcbc-11ea-85a2-0e1702b77d41
  JAWS_CLIENT_GLOBUS_BASEDIR: /

  JAWS_SITE_CORI_GLOBUS_ENDPOINT_ID: be1ff650-dcbc-11ea-85a2-0e1702b77d41
  JAWS_SITE_CORI_GLOBUS_UPLOADS_SUBDIR: /global/cscratch1/sd/jaws_jtm/jaws-$DEPLOY_NAME/uploads
  JAWS_SITE_CORI_GLOBUS_ROOT_DIR: /
  JAWS_SITE_CORI_JAWS_RMQ_CENTRAL_HOST: rmq.lbl.gov
  JAWS_SITE_CORI_JAWS_RMQ_CENTRAL_PORT: 5672
  JAWS_SITE_CORI_JAWS_RMQ_CENTRAL_VHOST: jaws_$JAWS_DEPLOY_NAME
  JAWS_SITE_CORI_JAWS_RMQ_CENTRAL_QUEUE: JAWS_$JAWS_SITE_NAME
  JAWS_SITE_CORI_JAWS_RMQ_CENTRAL_USER: jaws
  JAWS_SITE_CORI_JAWS_RMQ_CENTRAL_PWD: $JAWS_SITE_CORI_RMQ_PW

  JAWS_SITE_JGI_GLOBUS_ENDPOINT_ID: 45afb626-a4bd-11e8-96f0-0a6d4e044368
  JAWS_SITE_JGI_GLOBUS_UPLOADS_SUBDIR: /global/scratch/jaws/jaws-$DEPLOY_NAME/uploads
  JAWS_SITE_JGI_GLOBUS_ROOT_DIR: /
  JAWS_SITE_JGI_JAWS_RMQ_CENTRAL_HOST: rmq.lbl.gov
  JAWS_SITE_JGI_JAWS_RMQ_CENTRAL_PORT: 5672
  JAWS_SITE_JGI_JAWS_RMQ_CENTRAL_VHOST: jaws_$JAWS_DEPLOY_NAME
  JAWS_SITE_JGI_JAWS_RMQ_CENTRAL_QUEUE: JAWS_$JAWS_SITE_NAME
  JAWS_SITE_JGI_JAWS_RMQ_CENTRAL_USER: jaws
  JAWS_SITE_JGI_JAWS_RMQ_CENTRAL_PWD: $JAWS_SITE_LBNL_RMQ_PW

  JAWS_SITE_INSTALL_DIR: $JAWS_INSTALL_DIR/site
  JAWS_SITE_REF_DATA_DIR: /global/cfs/projectdirs/jaws/refdata
  JAWS_SITE_UPLOADS_SUBDIR: $JAWS_SITE_CORI_GLOBUS_UPLOADS_SUBDIR
  JAWS_SITE_GLOBUS_DOWNLOADS_SUBDIR: /global/cscratch1/sd/jaws/jaws-$DEPLOY_NAME/downloads
  JAWS_SITE_GLOBUS_GLOBUS_ROOT_DIR: $JAWS_SITE_CORI_GLOBUS_ROOT_DIR
  JAWS_SITE_JAWS_GROUP_PERMISSION: ''
  JAWS_SITE_JTM_GROUP_PERMISSION: ''
  JAWS_SITE_CLIENT_GROUP_PERMISSION: ''
  JAWS_SITE_GLOBUS_CLIENT_ID: 1a130a01-48bc-489b-a729-9ab858de1755
  JAWS_SITE_GLOBUS_CLIENT_SECRET: $JAWS_GLOBUS_CLIENT_SECRET
  JAWS_SITE_GLOBUS_ENDPOINT_ID: $JAWS_SITE_CORI_GLOBUS_ENDPOINT_ID
  JAWS_SITE_GLOBUS_ROOT_DIR: $JAWS_SITE_CORI_GLOBUS_ROOT_DIR
  JAWS_SITE_GLOBUS_UPLOADS_SUBDIR: $JAWS_SITE_CORI_GLOBUS_UPLOADS_SUBDIR
  JAWS_SITE_GLOBUS_DEFAULT_DIR: '~'
  JAWS_SITE_SCRATCH_DIR: $JAWS_INSTALL_DIR/site_scratch_dir
  JAWS_SITE_JAWS_DB_HOST: jaws-db.lbl.gov
  JAWS_SITE_JAWS_DB_PORT: 3306
  JAWS_SITE_JAWS_DB_NAME: jaws_cori_$JAWS_DEPLOY_NAME
  JAWS_SITE_JAWS_DB_USER: jaws
  JAWS_SITE_JAWS_DB_PWD: $JAWS_SITE_CORI_DB_PW
  JAWS_SITE_JAWS_RMQ_LOCAL_HOST: rmq.lbl.gov
  JAWS_SITE_JAWS_RMQ_LOCAL_PORT: 5672
  JAWS_SITE_JAWS_RMQ_LOCAL_VHOST: jaws_$JAWS_DEPLOY_NAME
  JAWS_SITE_JAWS_RMQ_LOCAL_QUEUE: SITE_$JAWS_SITE_NAME
  JAWS_SITE_JAWS_RMQ_LOCAL_USER: jaws
  JAWS_SITE_JAWS_RMQ_LOCAL_PWD: $JAWS_SITE_CORI_RMQ_PW
  JAWS_SITE_JAWS_RMQ_CENTRAL_HOST: $JAWS_SITE_CORI_JAWS_RMQ_CENTRAL_HOST
  JAWS_SITE_JAWS_RMQ_CENTRAL_PORT: $JAWS_SITE_CORI_JAWS_RMQ_CENTRAL_PORT
  JAWS_SITE_JAWS_RMQ_CENTRAL_VHOST: $JAWS_SITE_CORI_JAWS_RMQ_CENTRAL_VHOST
  JAWS_SITE_JAWS_RMQ_CENTRAL_QUEUE: $JAWS_SITE_CORI_JAWS_RMQ_CENTRAL_QUEUE
  JAWS_SITE_JAWS_RMQ_CENTRAL_USER: $JAWS_SITE_CORI_JAWS_RMQ_CENTRAL_USER
  JAWS_SITE_JAWS_RMQ_CENTRAL_PWD: $JAWS_SITE_CORI_JAWS_RMQ_CENTRAL_PWD

  JAWS_SITE_JTM_HOST_NAME: $JAWS_SITE_NAME
  JAWS_SITE_JTM_USER_NAME: jtm_$JAWS_DEPLOY_NAME
  JAWS_SITE_JTM_SCRATCH_DIR: $JAWS_INSTALL_DIR/jtm_scratch_dir
  JAWS_SITE_JTM_WORKER_CONFIG_FILE: $JAWS_INSTALL_DIR/configs/jaws-jtm.conf
  JAWS_SITE_JTM_WORKER_INSTALL_DIR: $JAWS_INSTALL_DIR/jtm-worker
  JAWS_SITE_JTM_ENV_ACTIVATION: $JAWS_INSTALL_DIR/jtm
  JAWS_SITE_JTM_CONFIG_FILE: $JAWS_INSTALL_DIR/configs/jaws-jtm.conf
  JAWS_SITE_JTM_DB_HOST: jaws-db.lbl.gov
  JAWS_SITE_JTM_DB_PORT: 3306
  JAWS_SITE_JTM_DB_NAME: jtm_cori_$JAWS_DEPLOY_NAME
  JAWS_SITE_JTM_DB_USER: jaws
  JAWS_SITE_JTM_DB_PWD: $JAWS_JTM_CORI_DB_PW
  JAWS_SITE_JTM_RMQ_HOST: rmq.lbl.gov
  JAWS_SITE_JTM_RMQ_PORT: 5672
  JAWS_SITE_JTM_RMQ_VHOST: jtm_$JAWS_DEPLOY_NAME
  JAWS_SITE_JTM_RMQ_USER: jaws
  JAWS_SITE_JTM_RMQ_PWD: $JAWS_JTM_RMQ_CORI_PW

  JAWS_CROMWELL_ROOT: ''
  JAWS_CROMWELL_DOCKER_ROOT: $JAWS_INSTALL_DIR/cromwell-executions
  JAWS_CROMWELL_WORKFLOW_LOG_DIR: $JAWS_INSTALL_DIR/cromwell-workflow-logs
  JAWS_CROMWELL_REF_DATA_DIR: $JAWS_SITE_REF_DATA_DIR
  JAWS_CROMWELL_TMP_DIR: $JAWS_INSTALL_DIR/cromwell-tmp
  JAWS_CROMWELL_JAR_FILE: https://github.com/broadinstitute/cromwell/releases/download/52/cromwell-52.jar
  JAWS_CROMWELL_URL: http://localhost
  JAWS_CROMWELL_LOAD_JAVA: ''
  JAWS_CROMWELL_CONTAINER_EXEC: /global/cfs/projectdirs/jaws_jtm/jtm-dev/shifter_exec.sh
  JAWS_CROMWELL_PORT: 50104
  JAWS_CROMWELL_MYSQL_URL: jdbc:mysql://$JAWS_SITE_JAWS_DB_HOST:$JAWS_SITE_JAWS_DB_PORT/cromwell_cori_${JAWS_DEPLOY_NAME}?rewriteBatchedStatements=true&useSSL=false&autoReconnect=true&useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC
  JAWS_CROMWELL_MYSQL_USER: jaws
  JAWS_CROMWELL_MYSQL_PWD: $JAWS_CROMWELL_CORI_DB_PW

  JAWS_SUPERVISOR_INET_HTTP_SERVER: 127.0.0.1
  JAWS_SUPERVISOR_CTL_URL: http://localhost
  JAWS_SUPERVISOR_USERNAME: jaws
  JAWS_SUPERVISOR_PWD: $JAWS_SUPERVISORD_PW
  JAWS_SUPERVISOR_INSTALL_DIR: $JAWS_INSTALL_DIR/supervisor
  JAWS_SUPERVISOR_JAWS_PORT: 9001
  JAWS_SUPERVISOR_JTM_PORT: 9010
