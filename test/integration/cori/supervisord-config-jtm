[inet_http_server]
port=0.0.0.0:{{supervisor_port}}
username=jaws
password={{password}}

[supervisord]
logfile={{installpath}}/jtm-log
logfile_maxbytes=50MB
logfile_backups=2
loglevel=info
pidfile={{installpath}}/jtm-pidfile
nodaemon=false
minfds=1024
minprocs=200
identifier=supervisor-jtm-{{deployment_name}}
directory={{installpath}}

; The rpcinterface:supervisor section must remain in the config file for
; RPC (supervisorctl/web interface) to work.  Additional interfaces may be
; added by defining them in separate [rpcinterface:x] sections.

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl={{supervisor_url}}:{{supervisor_port}}
username=jaws
password={{password}}
prompt=supervisor-jtm-{{deployment_name}}

;----- Program Section

[program:jaws-jtm]
command={{shimpath}}/jaws-jtm-{{deployment_name}}
numprocs=1
startsecs=3
startretries=3
autorestart=unexpected

[program:jaws-cromwell]
command={{shimpath}}/jaws-cromwell-{{deployment_name}}
numprocs=1
startsecs=10
startretries=3
autorestart=unexpected

[program:jaws-deploy-worker]
command={{shimpath}}/jaws-deploy-worker-{{deployment_name}}
numprocs=1
startsecs=0
startretries=0
autorestart=false

[group:jaws-{{deployment_name}}]
programs=jaws-jtm,jaws-cromwell,jaws-deploy-worker
priority=999
